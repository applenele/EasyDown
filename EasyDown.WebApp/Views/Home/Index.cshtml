@using EasyDown.Entity
@{
    ViewBag.Title = "首页";
    List<Resource> resources = ViewBag.resources as List<Resource>;
}
<div>
    <img src="/Content/Images/gg.png" style="width:32px;height:32px;" /> 公告：最新上传
    @{
        if (resources.Count > 0)
        {
            foreach (var resource in resources)
            {
                <span style="margin-left:5px;"><a href="/Resource/Show/@resource.ID">@resource.ResourceName</a></span>
            }
        }
        else
        {
            <span>无</span>
        }
    }
</div>

<div style="margin-top:10px;">
    <div>
        <div style="float:left;">下载专区</div>
        <div style="float:right;">
            <input type="text" id="searchContent" />
            <input type="button" id="btnSearch" value="搜索" />
        </div>
    </div>
    <div class="clr"></div>
    <div class="box-main">
        <div class="row">
            <div class="col-md-4">
                <h3>Word上传</h3>
                @foreach (var item in ViewBag.Words as List<Resource>)
                {
                    <div><a href="/Resource/Show/@item.ID">@item.ResourceName</a></div>
                }
            </div>
            <div class="col-md-4">
                <h3>视屏上传</h3>
                @foreach (var item in ViewBag.Videos as List<Resource>)
                {
                    <div><a href="/Resource/Show/@item.ID">@item.ResourceName</a></div>
                }
            </div>
            <div class="col-md-4">
                <h3>音乐上传</h3>
                @foreach (var item in ViewBag.Musics as List<Resource>)
                {
                    <div><a href="/Resource/Show/@item.ID">@item.ResourceName</a></div>
                }
            </div>
        </div>
        <div id="resourceLst"></div>
    </div>
</div>

@section scripts {
    <!--Script references. -->
    <!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
    <!--Reference the SignalR library. -->
    <script src="~/Scripts/jquery.signalR-2.2.0.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>
    <!--SignalR script to update the chat page and send messages.-->
    <script>
        $(function () {
            var hubProxy = $.connection.resourceHub;

            hubProxy.client.GetNew = function (data) {
                console.log(data);
                ShowNew(data);
            }

            $.connection.hub.start().done(function () {
                // hubProxy.server.newToNotify("test1");
            });
        })
    </script>
}